<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Swim Pulse Performance</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a1d37">
  <link rel="icon" href="icon-192.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <style>
    :root { --p:#0a1d37; --a:#00d4ff; }
    body { margin:0; font-family:'Inter',sans-serif; background:#f8fafc; }
    header { background:linear-gradient(rgba(10,29,55,0.8),rgba(30,64,175,0.7)), url('https://cdn.britannica.com/01/193601-050-F8F18A9B/Katie-Ledecky-American-lead-way-women-world-2016.jpg') center/cover fixed; color:white; text-align:center; padding:120px 20px; }
    h1 { font-size:3.5em; margin:0; text-shadow:3px 3px 10px #000; }
    .sub { font-size:1.8em; font-weight:600; text-shadow:2px 2px 8px #000; }
    .btn { background:var(--a); color:black; padding:16px 36px; border-radius:50px; font-weight:bold; margin:15px; text-decoration:none; display:inline-block; }
    .btn-w { background:white; color:var(--p); }
    .login-box { max-width:420px; margin:70px auto; background:white; padding:50px; border-radius:25px; box-shadow:0 25px 60px rgba(0,0,0,0.2); text-align:center; }
    input, button { width:100%; padding:16px; margin:12px 0; border-radius:12px; border:none; font-size:1.1em; }
    button { background:var(--p); color:white; font-weight:bold; }
    #private { display:none; }
    .card { background:white; margin:20px; padding:25px; border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,0.1); }
    .pb { font-weight:bold; color:var(--p); }
  </style>
</head>
<body>

<header>
  <h1>Swim Pulse Performance</h1>
  <p class="sub">A Science-Based Swim Program</p>
  <a href="#resources" class="btn">Free Resources</a>
  <a href="#login" class="btn btn-w">Swimmer Login</a>
</header>

<div class="login-box" id="login">
  <p style="font-size:4em;">Swimmer</p>
  <input type="text" id="name" placeholder="Enter your name (e.g. Ethan)">
  <button onclick="login()">Enter Portal</button>
</div>

<div id="private">
  <div style="padding:40px 20px; text-align:center;">
    <h1 style="color:var(--p);">Welcome back, <span id="display"></span>!</h1>
    <div class="card"><h3>Today's Workout</h3><p id="workout">…</p></div>
    <div class="card"><h3>Current Goal</h3><p id="goal">…</p></div>
    <div class="card"><h3>Coach's Note</h3><p id="note">…</p></div>
    <div class="card"><h3>Personal Bests (Nov 2025)</h3><div id="pbs" style="text-align:left;"></div></div>
    <button onclick="localStorage.removeItem('swimmer');location.reload()" class="btn" style="margin:30px;">Logout</button>
  </div>
</div>

<script>
// ←←← PASTE YOUR REAL CONFIG HERE (from step 4) ←←←
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abcdef123456"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

function login() {
  const name = document.getElementById('name').value.trim();
  if (!name) return alert("Enter name");
  db.collection("swimmers").doc(name.toLowerCase()).get().then(doc => {
    if (doc.exists) {
      localStorage.setItem('swimmer', name.toLowerCase());
      const d = doc.data();
      document.getElementById('display').textContent = d.name;
      document.getElementById('workout').innerHTML = d.todayWorkout;
      document.getElementById('goal').textContent = d.goal;
      document.getElementById('note').textContent = d.strokeNote;
      document.getElementById('pbs').innerHTML = Object.entries(d.pbs||{})
        .map(([e,t])=>`${e}: <span class="pb">${t}</span>`).join('<br>');
      document.getElementById('login').style.display='none';
      document.getElementById('private').style.display='block';
    } else alert("Name not found — contact coach");
  });
}
if (localStorage.getItem('swimmer')) {
  document.getElementById('name').value = localStorage.getItem('swimmer');
  login();
}
</script>
</body>
</html>
